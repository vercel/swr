import { Callout } from 'nextra-theme-docs'

# –ü–∞–≥–∏–Ω–∞—Ü–∏—è

<Callout emoji="‚úÖ">
  –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±–Ω–æ–≤–∏—Ç–µ—Å—å –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ (‚â• 0.3.0), —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç API. –ü—Ä–µ–¥—ã–¥—É—â–∏–π API <code>useSWRPages</code> —è–≤–ª—è–µ—Ç—Å—è —É—Å—Ç–∞—Ä–µ–≤—à–∏–º.
</Callout>

SWR –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π API `useSWRInfinite` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –æ–±—â–µ–ø—Ä–∏–Ω—è—Ç—ã—Ö UI —à–∞–±–ª–æ–Ω–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ **–ø–∞–≥–∏–Ω–∞—Ü–∏—è** –∏ **–±–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞**.

## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `useSWR` [#when-to-use-useswr]

### –ü–∞–≥–∏–Ω–∞—Ü–∏—è [#pagination]

–î–ª—è –Ω–∞—á–∞–ª–∞, –Ω–∞–º –º–æ–∂–µ—Ç **–ù–ï** –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è `useSWRInfinite`, –∞ –≤–º–µ—Å—Ç–æ –Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç–æ `useSWR`, –µ—Å–ª–∏ –º—ã —Å–æ–∑–¥–∞–µ–º —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ —ç—Ç–æ–≥–æ:

import { Pagination } from 'components/diagrams/pagination'

<div className="mt-8">
  <Pagination/>
</div>

...—á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è —Ç–∏–ø–∏—á–Ω–æ–π UI –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π. –ü–æ—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ —ç—Ç–æ –ª–µ–≥–∫–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é `useSWR`:

```jsx {5}
function App () {
  const [pageIndex, setPageIndex] = useState(0);

  // URL-–∞–¥—Ä–µ—Å API –≤–∫–ª—é—á–∞–µ—Ç –∏–Ω–¥–µ–∫—Å —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º React.
  const { data } = useSWR(`/api/data?page=${pageIndex}`, fetcher);

  // ... –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—à–∏–±–∫–∏

  return <div>
    {data.map(item => <div key={item.id}>{item.name}</div>)}
    <button onClick={() => setPageIndex(pageIndex - 1)}>–ù–∞–∑–∞–¥</button>
    <button onClick={() => setPageIndex(pageIndex + 1)}>–í–ø–µ—Ä—ë–¥</button>
  </div>
}
```

–ë–æ–ª–µ–µ —Ç–æ–≥–æ, –º—ã –º–æ–∂–µ–º —Å–æ–∑–¥–∞—Ç—å –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—é –¥–ª—è —ç—Ç–æ–≥–æ ¬´–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã¬ª:

```jsx {13}
function Page ({ index }) {
  const { data } = useSWR(`/api/data?page=${index}`, fetcher);

  // ... –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—à–∏–±–∫–∏

  return data.map(item => <div key={item.id}>{item.name}</div>)
}

function App () {
  const [pageIndex, setPageIndex] = useState(0);

  return <div>
    <Page index={pageIndex}/>
    <button onClick={() => setPageIndex(pageIndex - 1)}>–ù–∞–∑–∞–¥</button>
    <button onClick={() => setPageIndex(pageIndex + 1)}>–í–ø–µ—Ä—ë–¥</button>
  </div>
}
```

–ë–ª–∞–≥–æ–¥–∞—Ä—è –∫–µ—à—É SWR –º—ã –ø–æ–ª—É—á–∞–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É.
–ú—ã —Ä–µ–Ω–¥–µ—Ä–∏–º —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤–Ω—É—Ç—Ä–∏ —Å–∫—Ä—ã—Ç–æ–≥–æ div, –ø–æ—ç—Ç–æ–º—É SWR –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –≤—ã–±–æ—Ä–∫—É –¥–∞–Ω–Ω—ã—Ö —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É, –¥–∞–Ω–Ω—ã–µ —É–∂–µ —Ç–∞–º:

```jsx {6}
function App () {
  const [pageIndex, setPageIndex] = useState(0);

  return <div>
    <Page index={pageIndex}/>
    <div style={{ display: 'none' }}><Page index={pageIndex + 1}/></div>
    <button onClick={() => setPageIndex(pageIndex - 1)}>–ù–∞–∑–∞–¥</button>
    <button onClick={() => setPageIndex(pageIndex + 1)}>–í–ø–µ—Ä—ë–¥</button>
  </div>
}
```

–í—Å–µ–≥–æ —Å –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π –∫–æ–¥–∞ –º—ã –ø–æ–ª—É—á–∞–µ–º —É–ª—É—á—à–µ–Ω–Ω—ã–π UX. –•—É–∫ `useSWR` –Ω–∞—Å—Ç–æ–ª—å–∫–æ –º–æ—â–Ω—ã–π,
—á—Ç–æ –æ–Ω –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.

### –ë–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ [#infinite-loading]

–ò–Ω–æ–≥–¥–∞ –º—ã —Ö–æ—Ç–∏–º —Å–æ–∑–¥–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å **–±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏** —Å –∫–Ω–æ–ø–∫–æ–π ¬´–ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â—ë¬ª,
–∫–æ—Ç–æ—Ä–∞—è –¥–æ–±–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Å–ø–∏—Å–æ–∫ (–∏–ª–∏ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ):

import { Infinite } from 'components/diagrams/infinite'

<div className="mt-8">
  <Infinite/>
</div>

–ß—Ç–æ–±—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —ç—Ç–æ, –Ω–∞–º –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å **–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤** –Ω–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ.
–£ —Ö—É–∫–æ–≤ React –µ—Å—Ç—å [–ø–∞—Ä–∞ –ø—Ä–∞–≤–∏–ª](https://ru.reactjs.org/docs/hooks-rules.html), –ø–æ—ç—Ç–æ–º—É –º—ã **–ù–ï –ú–û–ñ–ï–ú** –¥–µ–ª–∞—Ç—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ —ç—Ç–æ–≥–æ:

```jsx {5,6,7,8,9}
function App () {
  const [cnt, setCnt] = useState(1)

  const list = []
  for (let i = 0; i < cnt; i++) {
    // üö® –≠—Ç–æ –Ω–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ! –ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –≤—ã –Ω–µ –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö—É–∫–∏ –≤–Ω—É—Ç—Ä–∏ —Ü–∏–∫–ª–∞.
    const { data } = useSWR(`/api/data?page=${i}`)
    list.push(data)
  }

  return <div>
    {list.map((data, i) =>
      <div key={i}>{
        data.map(item => <div key={item.id}>{item.name}</div>)
      }</div>)}
    <button onClick={() => setCnt(cnt + 1)}>–ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â—ë</button>
  </div>
}
```

–í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—é `<Page />`, –∫–æ—Ç–æ—Ä—É—é –º—ã —Å–æ–∑–¥–∞–ª–∏ –¥–ª—è —ç—Ç–æ–≥–æ:

```jsx {5,6,7}
function App () {
  const [cnt, setCnt] = useState(1)

  const pages = []
  for (let i = 0; i < cnt; i++) {
    pages.push(<Page index={i} key={i} />)
  }

  return <div>
    {pages}
    <button onClick={() => setCnt(cnt + 1)}>–ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â—ë</button>
  </div>
}
```

### –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Å–ª—É—á–∞–∏ [#advanced-cases]

–û–¥–Ω–∞–∫–æ, –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö —Å–ª—É—á–∞—è—Ö, –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–µ –≤—ã—à–µ —Ä–µ—à–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

–ù–∞–ø—Ä–∏–º–µ—Ä, –º—ã –≤—Å—ë –µ—â—ë —Ä–µ–∞–ª–∏–∑—É–µ–º —Ç–æ—Ç –∂–µ UI ¬´–ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â—ë¬ª, –Ω–æ –Ω–∞–º —Ç–∞–∫–∂–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å —á–∏—Å–ª–æ,
–ø–æ–∫–∞–∑—ã–≤–∞—é—â–µ–µ, —Å–∫–æ–ª—å–∫–æ –≤—Å–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–º–µ–µ—Ç—Å—è. –ú—ã –±–æ–ª—å—à–µ –Ω–µ –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ `<Page />`,
–ø–æ—Ç–æ–º—É —á—Ç–æ UI –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è (`<App />`) –Ω—É–∂–Ω—ã –¥–∞–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã:

```jsx {10}
function App () {
  const [cnt, setCnt] = useState(1)

  const pages = []
  for (let i = 0; i < cnt; i++) {
    pages.push(<Page index={i} key={i} />)
  }

  return <div>
    <p>??? —ç–ª–µ–º–µ–Ω—Ç–æ–≤</p>
    {pages}
    <button onClick={() => setCnt(cnt + 1)}>–ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â—ë</button>
  </div>
}
```

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è API –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ **–Ω–∞ –æ—Å–Ω–æ–≤–µ –∫—É—Ä—Å–æ—Ä–∞**, —ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ —Ç–æ–∂–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.
–ò–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –Ω—É–∂–Ω—ã –¥–∞–Ω–Ω—ã–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –æ–Ω–∏ –Ω–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã.

–†–µ—à–∏—Ç—å —ç—Ç—É –∑–∞–¥–∞—á—É –Ω–∞–º –º–æ–∂–µ—Ç –ø–æ–º–æ—á—å –Ω–æ–≤—ã–π —Ö—É–∫ `useSWRInfinite`.

## useSWRInfinite [#useswrinfinite]

`useSWRInfinite` –¥–∞–µ—Ç –Ω–∞–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –ø–æ–º–æ—â—å—é –æ–¥–Ω–æ–≥–æ —Ö—É–∫–∞. –í–æ—Ç –∫–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç:

```jsx
import useSWRInfinite from 'swr/infinite'

// ...
const { data, error, isLoading, isValidating, mutate, size, setSize } = useSWRInfinite(
  getKey, fetcher?, options?
)
```

–ü–æ–¥–æ–±–Ω–æ `useSWR`, —ç—Ç–æ—Ç –Ω–æ–≤—ã–π —Ö—É–∫ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–ª—é—á –∑–∞–ø—Ä–æ—Å–∞, —Ñ—É–Ω–∫—Ü–∏—é fetcher –∏ –æ–ø—Ü–∏–∏.
–û–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è, —á—Ç–æ –∏ `useSWR`, –≤–∫–ª—é—á–∞—è 2 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è: —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ —Ä–∞–∑–º–µ—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∫–∞–∫ —Å–æ—Å—Ç–æ—è–Ω–∏–µ React.

–ü—Ä–∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ –æ–¥–Ω–∞ _—Å—Ç—Ä–∞–Ω–∏—Ü–∞_ ‚Äî —ç—Ç–æ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å, –∏ –Ω–∞—à–∞ —Ü–µ–ª—å ‚Äî –ø–æ–ª—É—á–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–∞–Ω–∏—Ü –∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∏—Ö.

<Callout emoji="‚ö†Ô∏è">
  –ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –≤–µ—Ä—Å–∏–∏ SWR 0.x, `useSWRInfinite` –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑ `swr`:<br/>
  `import { useSWRInfinite } from 'swr'`
</Callout>

### API [#api]

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã [#parameters]

- `getKey`: —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∏–Ω–¥–µ–∫—Å –∏ –¥–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–ª—é—á —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `fetcher`: —Ç–æ –∂–µ, —á—Ç–æ –∏ [fetcher-—Ñ—É–Ω–∫—Ü–∏—è](/docs/data-fetching) `useSWR`
- `options`: –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤—Å–µ –æ–ø—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `useSWR`, —Å 3 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –æ–ø—Ü–∏—è–º–∏:
  - `initialSize = 1`: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ
  - `revalidateAll = false`: –≤—Å–µ–≥–¥–∞ –ø—ã—Ç–∞—Ç—å—Å—è —Ä–µ–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  - `revalidateFirstPage = true`: –≤—Å–µ–≥–¥–∞ –ø—ã—Ç–∞—Ç—å—Å—è —Ä–µ–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
  - `persistSize = false`: –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–æ 1 (–∏–ª–∏ `initialSize`, –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω), –∫–æ–≥–¥–∞ –∫–ª—é—á –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–∑–º–µ–Ω—è–µ—Ç—Å—è
  - `parallel = false`: –∑–∞–≥—Ä—É–∂–∞—Ç—å –º–Ω–æ–≥–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

<Callout>
  –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –æ–ø—Ü–∏—é `initialSize` –Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω—è—Ç—å –≤ –∂–∏–∑–Ω–µ–Ω–Ω–æ–º —Ü–∏–∫–ª–µ.
</Callout>

#### –í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è [#return-values]

- `data`: –º–∞—Å—Å–∏–≤ –∑–Ω–∞—á–µ–Ω–∏–π –æ—Ç–≤–µ—Ç–∞ –≤—ã–±–æ—Ä–∫–∏ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `error`: —Ç–æ –∂–µ , —á—Ç–æ –∏ `error` –≤ `useSWR`
- `isLoading`: —Ç–æ –∂–µ, —á—Ç–æ –∏ `isLoading` –≤ `useSWR`
- `isValidating`: —Ç–æ –∂–µ, —á—Ç–æ –∏ `isValidating` –≤ `useSWR`
- `mutate`: —Ç–æ –∂–µ, —á—Ç–æ –∏ —Å–≤—è–∑–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –º—É—Ç–∞—Ü–∏–∏ –≤ `useSWR`, –Ω–æ –º–∞–Ω–∏–ø—É–ª–∏—Ä—É–µ—Ç –º–∞—Å—Å–∏–≤–æ–º –¥–∞–Ω–Ω—ã—Ö
- `size`: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü, –∫–æ—Ç–æ—Ä—ã–µ _–±—É–¥—É—Ç_ –∏–∑–≤–ª–µ–∫–∞—Ç—å—Å—è –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è
- `setSize`: —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–∑–≤–ª–µ—á—å

### –ü—Ä–∏–º–µ—Ä 1: API –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–Ω–¥–µ–∫—Å–∞ [#example-1-index-based-paginated-api]

–î–ª—è –æ–±—ã—á–Ω—ã—Ö API –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–Ω–¥–µ–∫—Å–∞:

```plaintext
GET /users?page=0&limit=10
[
  { name: '–ê–ª–∏—Å–∞', ... },
  { name: '–í–∞—Å—è', ... },
  { name: '–ö–∞—Ç—è', ... },
  ...
]
```

```jsx {4,5,6,7,10}
// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–ª—é—á–∞ SWR –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã,
// –µ—ë –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –±—É–¥–µ—Ç –ø—Ä–∏–Ω—è—Ç–æ –≤ `fetcher`.
// –ï—Å–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `null`, –∑–∞–ø—Ä–æ—Å —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è.
const getKey = (pageIndex, previousPageData) => {
  if (previousPageData && !previousPageData.length) return null // –¥–æ—Å—Ç–∏–≥–Ω—É—Ç –∫–æ–Ω–µ—Ü
  return `/users?page=${pageIndex}&limit=10`                    // –∫–ª—é—á SWR
}

function App () {
  const { data, size, setSize } = useSWRInfinite(getKey, fetcher)
  if (!data) return 'loading'

  // –¢–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º –ø–æ–¥—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  let totalUsers = 0
  for (let i = 0; i < data.length; i++) {
    totalUsers += data[i].length
  }

  return <div>
    <p>{totalUsers} users listed</p>
    {data.map((users, index) => {
      // `data` ‚Äî —ç—Ç–æ –º–∞—Å—Å–∏–≤ –æ—Ç–≤–µ—Ç–æ–≤ API –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
      return users.map(user => <div key={user.id}>{user.name}</div>)
    })}
    <button onClick={() => setSize(size + 1)}>–ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â—ë</button>
  </div>
}
```

–§—É–Ω–∫—Ü–∏—è `getKey` —è–≤–ª—è–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–º –æ—Ç–ª–∏—á–∏–µ–º `useSWRInfinite` –æ—Ç `useSWR`.
–û–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∏–Ω–¥–µ–∫—Å —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∞ —Ç–∞–∫–∂–µ –¥–∞–Ω–Ω—ã–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –æ–±–∞ API –ø–∞–≥–∏–Ω–∞—Ü–∏–∏: –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–Ω–¥–µ–∫—Å–∞, –∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫—É—Ä—Å–æ—Ä–∞ —Ö–æ—Ä–æ—à–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è.

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, `data` –±–æ–ª—å—à–µ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –æ–¥–Ω–∏–º –æ—Ç–≤–µ—Ç–æ–º API. –≠—Ç–æ –º–∞—Å—Å–∏–≤ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤ API:

```js
// `data` –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –≤–æ—Ç —Ç–∞–∫:
[
  [
    { name: '–ê–ª–∏—Å–∞', ... },
    { name: '–í–∞—Å—è', ... },
    { name: '–ö–∞—Ç—è', ... },
    ...
  ],
  [
    { name: '–ò–≤–∞–Ω', ... },
    { name: '–ü–∞–≤–µ–ª', ... },
    { name: '–ì–µ–æ—Ä–≥–∏–π', ... },
    ...
  ],
  ...
]
```

### –ü—Ä–∏–º–µ—Ä 2: API –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫—É—Ä—Å–æ—Ä–∞ –∏–ª–∏ —Å–º–µ—â–µ–Ω–∏—è [#example-2-cursor-or-offset-based-paginated-api]

–î–æ–ø—É—Å—Ç–∏–º, API —Ç–µ–ø–µ—Ä—å —Ç—Ä–µ–±—É–µ—Ç –∫—É—Ä—Å–æ—Ä –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π –∫—É—Ä—Å–æ—Ä –≤–º–µ—Å—Ç–µ —Å –¥–∞–Ω–Ω—ã–º–∏:

```plaintext
GET /users?cursor=123&limit=10
{
  data: [
    { name: '–ê–ª–∏—Å–∞' },
    { name: '–í–∞—Å—è' },
    { name: '–ö–∞—Ç—è' },
    ...
  ],
  nextCursor: 456
}
```

–ú—ã –º–æ–∂–µ–º –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞—à—É —Ñ—É–Ω–∫—Ü–∏—é `getKey` –Ω–∞:

```jsx
const getKey = (pageIndex, previousPageData) => {
  // –¥–æ—Å—Ç–∏–≥–Ω—É—Ç –∫–æ–Ω–µ—Ü
  if (previousPageData && !previousPageData.data) return null

  // –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞, —É –Ω–∞—Å –Ω–µ—Ç `previousPageData`
  if (pageIndex === 0) return `/users?limit=10`

  // –¥–æ–±–∞–≤–∏–º –∫—É—Ä—Å–æ—Ä –≤ endpoint API
  return `/users?cursor=${previousPageData.nextCursor}&limit=10`
}
```

### –†–µ–∂–∏–º –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ [#parallel-fetching-mode]

<Callout emoji="‚úÖ">
  –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±–Ω–æ–≤–∏—Ç–µ—Å—å –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ (‚â• 2.1.0), —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç API.
</Callout>

–ü–æ–≤–µ–¥–µ–Ω–∏–µ useSWRInfinite –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –ø–æ—Å–∫–æ–ª—å–∫—É —Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–∞ –æ—Å–Ω–æ–≤—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Ä–∞–Ω–µ–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –û–¥–Ω–∞–∫–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü –º–æ–∂–µ—Ç –Ω–µ –±—ã—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–µ –∑–∞–≤–∏—Å—è—Ç –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞. –£–∫–∞–∑–∞–Ω–∏–µ –æ–ø—Ü–∏–∏ `parallel` –∫–∞–∫ `true` –ø–æ–∑–≤–æ–ª–∏—Ç –≤–∞–º –∑–∞–≥—Ä—É–∂–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ, —á—Ç–æ –º–æ–∂–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É—Å–∫–æ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏.

```jsx
// parallel = false (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
// —Å—Ç—Ä–∞–Ω–∏—Ü–∞1 ===> —Å—Ç—Ä–∞–Ω–∏—Ü–∞2 ===> —Å—Ç—Ä–∞–Ω–∏—Ü–∞3 ===> –≥–æ—Ç–æ–≤–æ
//
// parallel = true
// —Å—Ç—Ä–∞–Ω–∏—Ü–∞1 ==> –≥–æ—Ç–æ–≤–æ
// —Å—Ç—Ä–∞–Ω–∏—Ü–∞2 =====> –≥–æ—Ç–æ–≤–æ
// —Å—Ç—Ä–∞–Ω–∏—Ü–∞3 ===> –≥–æ—Ç–æ–≤–æ
//
// previousPageData –≤—Å–µ–≥–¥–∞ `null`
const getKey = (pageIndex, previousPageData) => {
  return `/users?page=${pageIndex}&limit=10`
}

function App () {
  const { data } = useSWRInfinite(getKey, fetcher, { parallel: true })
}
```

<Callout emoji="‚ö†Ô∏è">
    –ê—Ä–≥—É–º–µ–Ω—Ç `previousPageData` —Ñ—É–Ω–∫—Ü–∏–∏ `getKey` —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è `null`, –∫–æ–≥–¥–∞ –≤—ã –≤–∫–ª—é—á–∞–µ—Ç–µ –æ–ø—Ü–∏—é `parallel`.
</Callout>

### Revalidate Specific Pages [#revalidate-specific-pages]

<Callout emoji="‚úÖ">
  Please update to the latest version (‚â• 2.2.5) to use this API.
</Callout>

The default behavior of the mutation of `useSWRInfinite` is to revalidate all pages that have been loaded. But you might want to revalidate only the specific pages that have been changed. You can revalidate only specific pages by passing a function to the `revalidate` option.

The `revalidate` function is called for each page.

```jsx
function App() {
  const { data, mutate, size } = useSWRInfinite(
    (index) => [`/api/?page=${index + 1}`, index + 1],
    fetcher
  );

  mutate(data, {
    // only revalidate the last page
    revalidate: (pageData, [url, page]) => page === size
  });
}
```

### –ì–ª–æ–±–∞–ª—å–Ω–∞—è –º—É—Ç–∞—Ü–∏—è —Å `useSWRInfinite` [#global-mutate-with-useswrinfinite]

`useSWRInfinite` —Ö—Ä–∞–Ω–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü –≤ –∫–µ—à–µ —Å–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º –∫–ª—é—á–æ–º –∫–µ—à–∞ –≤–º–µ—Å—Ç–µ —Å –¥–∞–Ω–Ω—ã–º–∏ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –ø–æ—ç—Ç–æ–º—É –≤–∞–º –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `unstable_serialize` –≤ `swr/infinite`, —á—Ç–æ–±—ã —Ä–µ–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å –≥–ª–æ–±–∞–ª—å–Ω–æ–π –º—É—Ç–∞—Ü–∏–µ–π.

```jsx
import { useSWRConfig } from "swr"
import { unstable_serialize } from "swr/infinite"

function App() {
    const { mutate } = useSWRConfig()
    mutate(unstable_serialize(getKey))
}
```

<Callout emoji="‚ö†Ô∏è">
    –ö–∞–∫ –∏ —Å–ª–µ–¥—É–µ—Ç –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏—è, `unstable_serialize` –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞–±–∏–ª—å–Ω—ã–º API, –ø–æ—ç—Ç–æ–º—É –º—ã –º–æ–∂–µ–º –∏–∑–º–µ–Ω–∏—Ç—å –µ–≥–æ –≤ –±—É–¥—É—â–µ–º.
</Callout>

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ [#advanced-features]

[–í–æ—Ç –ø—Ä–∏–º–µ—Ä](/examples/infinite-loading), –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∏–π, –∫–∞–∫ –≤—ã –º–æ–∂–µ—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Å –ø–æ–º–æ—â—å—é `useSWRInfinite`:

- —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
- –ø–æ–∫–∞–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, –µ—Å–ª–∏ –æ–Ω –ø—É—Å—Ç
- –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ ¬´–ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â—ë¬ª, –µ—Å–ª–∏ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç –∫–æ–Ω–µ—Ü
- –∏–∑–º–µ–Ω—è–µ–º—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö
- –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ–≥–æ —Å–ø–∏—Å–∫–∞
