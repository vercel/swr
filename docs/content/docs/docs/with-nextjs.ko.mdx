---
title: 'Usage with Next.js'
---

import { Callout } from 'nextra-theme-docs'

## App Router [#app-dir]

### μ„λ²„ μ»΄ν¬λ„νΈ [#rsc]

<Callout type="default" emoji="β…">
   Next.jsμ App Routerμ—μ„λ” λ¨λ“  μ»΄ν¬λ„νΈκ°€ κΈ°λ³Έμ μΌλ΅ React Server Component(RSC) μ…λ‹λ‹¤. **λ”°λΌμ„ RSCμ—μ„λ” SWRμ ν‚¤ μ§λ ¬ν™”(Key Serialization) APIλ§ κ°€μ Έμ¬ μ μμµλ‹λ‹¤.**
</Callout>

```tsx filename="app/page.tsx" copy
import { unstable_serialize } from 'swr' // β… μ„λ²„ μ»΄ν¬λ„νΈμ—μ„ μ‚¬μ© κ°€λ¥ν•©λ‹λ‹¤.
import { unstable_serialize as infinite_unstable_serialize } from 'swr/infinite' // β… μ„λ²„ μ»΄ν¬λ„νΈμ—μ„ μ‚¬μ© κ°€λ¥ν•©λ‹λ‹¤.
```

<Callout type="error">
   λ‹¤λ¥Έ APIλ” RSCμ—μ„ μ‚¬μ©ν•  μ μ—†μΌλ―€λ΅ SWRμ—μ„ κ°€μ Έμ¬ μ μ—†μµλ‹λ‹¤.
</Callout>

```tsx filename="app/page.tsx" highlight={1}
import useSWR from 'swr' // β μ„λ²„ μ»΄ν¬λ„νΈμ—μ„ μ‚¬μ©ν•  μ μ—†μµλ‹λ‹¤.
```

### ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ

μ»΄ν¬λ„νΈμ— `'use client'` μ§€μ‹μ–΄λ¥Ό μ¶”κ°€ν•κ±°λ‚ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ—μ„ SWRμ„ κ°€μ Έμ¤λ©΄, SWRμ ν΄λΌμ΄μ–ΈνΈ λ°μ΄ν„° νμΉ­ ν›…μ„ μ‚¬μ©ν•  μ μμµλ‹λ‹¤.

```tsx filename="app/page.tsx" highlight={1} copy
'use client'
import useSWR from 'swr'
export default function Page() {
  const { data } = useSWR('/api/user', fetcher)
  return <h1>{data.name}</h1>
}
```

μ„λ²„ μ»΄ν¬λ„νΈμ `layout` λλ” `page`μ—μ„ `SWRConfig`λ¥Ό μ‚¬μ©ν•΄ μ „μ—­ μ„¤μ •μ„ κµ¬μ„±ν•΄μ•Ό ν•λ‹¤λ©΄, λ³„λ„μ ν΄λΌμ΄μ–ΈνΈ ν”„λ΅λ°”μ΄λ” μ»΄ν¬λ„νΈλ¥Ό λ§λ“¤μ–΄ μ„¤μ •μ„ μ μ©ν• ν›„, μ΄λ¥Ό μ„λ²„ μ»΄ν¬λ„νΈ νμ΄μ§€μ—μ„ μ‚¬μ©ν•μ„Έμ”.

```tsx filename="app/swr-provider.tsx" copy
'use client';
import { SWRConfig } from 'swr'
export const SWRProvider = ({ children }) => {
  return <SWRConfig>{children}</SWRConfig>
};
```

```tsx filename="app/page.tsx" copy
// μ΄κ²ƒμ€ μ—¬μ „ν μ„λ²„ μ»΄ν¬λ„νΈμ…λ‹λ‹¤.
import { SWRProvider } from './swr-provider'
export default function Page() {
  return (
    <SWRProvider>
      <h1>hello SWR</h1>
    </SWRProvider>
  )
}
```

## ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“ λ°μ΄ν„° νμΉ­ [#client-side-data-fetching]

νμ΄μ§€μ— μμ£Ό λ³€κ²½λλ” λ°μ΄ν„°κ°€ ν¬ν•¨λμ–΄ μκ³ , μ΄λ¥Ό μ‚¬μ „ λ λ”λ§ν•  ν•„μ”κ°€ μ—†λ‹¤λ©΄, SWRμ΄ μµμ μ μ„ νƒμ…λ‹λ‹¤. λ³„λ„μ μ„¤μ • μ—†μ΄ `useSWR`μ„ κ°€μ Έμ™€μ„ λ°μ΄ν„°κ°€ ν•„μ”ν• μ»΄ν¬λ„νΈμ—μ„ ν›…μ„ μ‚¬μ©ν•λ©΄ λ©λ‹λ‹¤.

λ™μ‘ λ°©μ‹:

- λ¨Όμ €, λ°μ΄ν„°λ¥Ό μ μ™Έν• νμ΄μ§€λ¥Ό μ¦‰μ‹ λ λ”λ§ν•©λ‹λ‹¤. μ΄λ•, λ΅λ”© μƒνƒλ¥Ό ν‘μ‹ν•  μ μμµλ‹λ‹¤.
- ν΄λΌμ΄μ–ΈνΈμ—μ„ λ°μ΄ν„°λ¥Ό κ°€μ Έμ¨ ν›„, μ¤€λΉ„λλ©΄ ν™”λ©΄μ— ν‘μ‹ν•©λ‹λ‹¤.

μ΄ λ°©μ‹μ€ λ€μ‹λ³΄λ“μ™€ κ°™μ€ μ‚¬μ©μ μ „μ© νμ΄μ§€μ— μ ν•©ν•©λ‹λ‹¤. λ€μ‹λ³΄λ“λ” κ°μΈν™”λ νμ΄μ§€μ΄λ―€λ΅ SEOκ°€ μ¤‘μ”ν•μ§€ μ•μΌλ©°, μ‚¬μ „ λ λ”λ§μ΄ ν•„μ”ν•μ§€ μ•μµλ‹λ‹¤. λν•, λ°μ΄ν„°κ°€ μμ£Ό λ³€κ²½λλ―€λ΅ μ”μ²­ μ‹μ μ— λ°μ΄ν„°λ¥Ό κ°€μ Έμ¤λ” λ°©μ‹μ΄ μ”κµ¬λ©λ‹λ‹¤.

## κΈ°λ³Έ λ°μ΄ν„°λ¥Ό μ΄μ©ν• μ‚¬μ „ λ λ”λ§ [#pre-rendering-with-default-data]

νμ΄μ§€λ¥Ό μ‚¬μ „ λ λ”λ§ν•΄μ•Ό ν•λ” κ²½μ°, Next.jsλ” [λ‘ κ°€μ§€ λ°©μ‹](https://nextjs.org/docs/basic-features/data-fetching)μ„ μ§€μ›ν•©λ‹λ‹¤:
**μ •μ  μƒμ„±(SSG)**κ³Ό **μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§(SSR)**

SWRκ³Ό ν•¨κ» μ‚¬μ©ν•λ©΄, SEOλ¥Ό μ„ν• μ‚¬μ „ λ λ”λ§κ³Ό λ”λ¶μ–΄ ν΄λΌμ΄μ–ΈνΈ μΈ΅ μΊμ‹±, μ¬κ²€μ¦, ν¬μ»¤μ¤ κ°μ§€, μ£ΌκΈ°μ μΈ λ°μ΄ν„° κ°±μ‹  κ°™μ€ κΈ°λ¥λ„ ν™μ©ν•  μ μμµλ‹λ‹¤.

μ‚¬μ „ ν¨μΉ­λ λ°μ΄ν„°λ¥Ό SWR ν›…μ μ΄κΈ° κ°’μΌλ΅ μ„¤μ •ν•λ ¤λ©΄, [`SWRConfig`](/docs/global-configuration)μ `fallback` μµμ…μ„ μ‚¬μ©ν•  μ μμµλ‹λ‹¤.

`getStaticProps`μ— λ€ν• μμ‹μ…λ‹λ‹¤:

```jsx
 export async function getStaticProps () {
  // `getStaticProps`λ” μ„λ²„ μΈ΅μ—μ„ μ‹¤ν–‰λ©λ‹λ‹¤.
  const article = await getArticleFromAPI()
  return {
    props: {
      fallback: {
        '/api/article': article
      }
    }
  }
}

function Article() {
  // `data`λ” `fallback`μ— μμΌλ―€λ΅ ν•­μƒ μ‚¬μ©ν•  μ μμµλ‹λ‹¤.
  const { data } = useSWR('/api/article', fetcher)
  return <h1>{data.title}</h1>
}

export default function Page({ fallback }) {
  // `SWRConfig` λ²”μ„ μ•μ— μλ” SWR ν›…μ€ ν•΄λ‹Ή κ°’μ„ μ‚¬μ©ν•κ² λ©λ‹λ‹¤.
  return (
    <SWRConfig value={{ fallback }}>
      <Article />
    </SWRConfig>
  )
}
```

The page is still pre-rendered. It's SEO friendly, fast to response, but also fully powered by SWR on the client side. The data can be dynamic and self-updated over time.
νμ΄μ§€λ” μ—¬μ „ν μ‚¬μ „ λ λ”λ§λ©λ‹λ‹¤. SEO μΉν™”μ μ΄κ³  μ‘λ‹µ μ†λ„κ°€ λΉ λ¥Ό λΏλ§ μ•„λ‹λΌ ν΄λΌμ΄μ–ΈνΈ μΈ΅μ—μ„ SWRμ— μν•΄ μ™„μ „ν κµ¬λ™λ©λ‹λ‹¤. λ°μ΄ν„°λ” μ‹κ°„μ΄ μ§€λ‚¨μ— λ”°λΌ λ™μ μΌλ΅ μμ²΄ μ—…λ°μ΄νΈλ  μ μμµλ‹λ‹¤.

<Callout emoji="π’΅">
  `Article` μ»΄ν¬λ„νΈλ” λ―Έλ¦¬ μƒμ„±λ λ°μ΄ν„°λ¥Ό μ‚¬μ „ λ λ”λ§ν•κ³  νμ΄μ§€κ°€ μ—…λ°μ΄νΈλ ν›„ μµμ‹  λ°μ΄ν„°λ¥Ό λ‹¤μ‹ κ°€μ Έμ™€ μµμ‹  μƒνƒλ΅ μ μ§€ν•©λ‹λ‹¤.
</Callout>

### λ³µν•© ν‚¤ [#complex-keys]

`useSWR`μ€ `array` λλ” `function` ν•νƒμ ν‚¤μ™€ ν•¨κ» μ‚¬μ©ν•  μ μμµλ‹λ‹¤. μ΄λ¬ν• ν‚¤λ¥Ό μ‚¬μ©ν•  λ• μ‚¬μ „ ν¨μΉ­λ λ°μ΄ν„°λ¥Ό μ μ©ν•λ ¤λ©΄, `unstable_serialize`μ„ μ‚¬μ©ν•μ—¬ `fallback` ν‚¤λ¥Ό μ§λ ¬ν™”ν•΄μ•Ό ν•©λ‹λ‹¤.

```jsx
import useSWR, { unstable_serialize } from 'swr'

export async function getStaticProps () {
  const article = await getArticleFromAPI(1)
  return {
    props: {
      fallback: {
        // unstable_serialize() λ°°μ—΄ ν•νƒμ ν‚¤
        [unstable_serialize(['api', 'article', 1])]: article,
      }
    }
  }
}

function Article() {
  // λ°°μ—΄ ν•νƒμ ν‚¤λ¥Ό μ‚¬μ©ν•μ„Έμ”.
  const { data } = useSWR(['api', 'article', 1], fetcher)
  return <h1>{data.title}</h1>
}

export default function Page({ fallback }) {
  return (
    <SWRConfig value={{ fallback }}>
      <Article />
    </SWRConfig>
  )
}
```
