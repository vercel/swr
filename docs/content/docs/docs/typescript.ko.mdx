# TypeScript

SWRì€ TypeScriptë¡œ ì‘ì„±ëœ ì•±ì— ì¹œí™”ì ì´ë©°, íƒ€ì… ì•ˆì •ì„±ì„ ê°–ìŠµë‹ˆë‹¤.

## ê¸°ë³¸ ì‚¬ìš©ë²• [#basic-usage]

ê¸°ë³¸ì ìœ¼ë¡œ SWRì€ `key`ë¡œë¶€í„° `fetcher`ì˜ ì¸ì íƒ€ì…ì„ ì¶”ë¡ í•˜ë¯€ë¡œ ì›í•˜ëŠ” íƒ€ì…ì„ ìë™ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

### useSWR [#useswr]

```typescript
// `key`ê°€ `string`ìœ¼ë¡œ ì¶”ë¡ ë¨
useSWR('/api/user', key => {})
useSWR(() => '/api/user', key => {})

// `key`ëŠ” { a: string; b: { c: string; d: number } }ë¡œ ì¶”ë¡ ë¨
useSWR({ a: '1', b: { c: '3', d: 2 } }, key => {})
useSWR(() => ({ a: '1', b: { c: '3', d: 2 } }), key => {})


// `arg0`ì€ stirngìœ¼ë¡œ ì¶”ë¡ ë¨.  `arg1`ì€ numberë¡œ ì¶”ë¡ ë¨
useSWR(['user', 8], ([arg0, arg1]) => {})
useSWR(() => ['user', 8], ([arg0, arg1]) => {})
```

ëª…ì‹œì ìœ¼ë¡œ `key`ì™€ `fetcher`ì˜ ì¸ìì— ëŒ€í•œ íƒ€ì…ì„ ì§€ì •í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

```typescript
import useSWR, { Fetcher } from 'swr'

const uid = '<user_id>'
const fetcher: Fetcher<User, string> = (id) => getUserById(id)

const { data } = useSWR(uid, fetcher)
// `data`ëŠ” `User | undefined`ì…ë‹ˆë‹¤.
```

ê¸°ë³¸ì ìœ¼ë¡œ `fetcher` í•¨ìˆ˜ ë‚´ì—ì„œì˜ [ì—ëŸ¬ ë°œìƒ](/docs/error-handling)ì€ `any` íƒ€ì…ì„ ê°–ìŠµë‹ˆë‹¤. ì´ íƒ€ì… ì—­ì‹œ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```typescript
const { data, error } = useSWR<User, Error>(uid, fetcher);
// `data`ëŠ” `User | undefined`ì…ë‹ˆë‹¤.
// `error`ëŠ” `Error | undefined`ì…ë‹ˆë‹¤.
```

### useSWRInfinite [#useswrinfinite]

`swr/infinite`ì™€ ë§ˆì°¬ê°€ì§€ë¡œ, ìë™ íƒ€ì… ì¶”ë¡ ì— ì˜ì¡´í•˜ê±°ë‚˜ ì§ì ‘ íƒ€ì…ì„ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```typescript
import { SWRInfiniteKeyLoader } from 'swr/infinite'

const getKey: SWRInfiniteKeyLoader = (index, previousPageData) => {
  // ...
}

const { data } = useSWRInfinite(getKey, fetcher)
```

### useSWRSubscription [#useswrsubscription]

* Inline subscribe function and mamually specify the type of `next`  using `SWRSubscriptionOptions`.

```tsx
import useSWRSubscription from 'swr/subscription'
import type { SWRSubscriptionOptions } from 'swr/subscription'

const { data, error } = useSWRSubscription('key', 
  (key, { next }: SWRSubscriptionOptions<number, Error>) => {
  //^ key will be inferred as `string`
  //....
  })
  return {
    data,
    //^ data will be inferred as `number | undefined`
    error
    //^ error will be inferred as `Error | undefined`
  }
}
```

* declare subscribe function using `SWRSubscription`

```tsx
import useSWRSubscription from 'swr/subscription'
import type { SWRSubscription } from 'swr/subscription'

/** 
 * The first generic is Key
 * The second generic is Data
 * The Third generic is Error
 */
const sub: SWRSubscription<string, number, Error> = (key, { next }) => {                         
  //......
}
const { data, error } = useSWRSubscription('key', sub)
```

## ì œë„¤ë¦­ [#generics]

`data`ì˜ íƒ€ì…ì„ ì§€ì •í•˜ëŠ” ê²ƒì€ ì‰½ìŠµë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ `fetcher`ì˜ ë°˜í™˜ íƒ€ì…(non-ready ìƒíƒœì¸ ê²½ìš°ì—ëŠ” `undefined`)ì„ `data` íƒ€ì…ìœ¼ë¡œ ì‚¬ìš©í•˜ì§€ë§Œ, ì´ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

```typescript
// ğŸ”¹ A. íƒ€ì…ì´ ì§€ì •ëœ fetcherë¥¼ ì‚¬ìš©í•˜ê¸°
// `getUser`ëŠ” `(endpoint: string) => User`ì…ë‹ˆë‹¤.
const { data } = useSWR('/api/user', getUser)

// ğŸ”¹ B. ë°ì´í„° íƒ€ì…ì„ ì§€ì •í•˜ê¸°
// `fetcher`ëŠ” ì¼ë°˜ì ìœ¼ë¡œ `any`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
const { data } = useSWR<User>('/api/user', fetcher)
```

SWRì˜ ë‹¤ë¥¸ ì˜µì…˜ì— ëŒ€í•œ íƒ€ì…ì„ ì¶”ê°€í•˜ë ¤ë©´, ê·¸ëŸ° íƒ€ì…ë“¤ì„ ì§ì ‘ ì„í¬íŠ¸í•˜ë©´ ë©ë‹ˆë‹¤.

```typescript
import useSWR from 'swr'
import type { SWRConfiguration } from 'swr'

const config: SWRConfiguration = {
  fallbackData: "fallback",
  revalidateOnMount: false
  // ...
}

const { data } = useSWR<string[]>('/api/data', fetcher, config)
```

## ë¯¸ë“¤ì›¨ì–´ íƒ€ì… [#middleware-types]

ì»¤ìŠ¤í…€ ë¯¸ë“¤ì›¨ì–´ì— íƒ€ì…ì„ ì¶”ê°€í•˜ëŠ” ë° ë„ì›€ì´ ë˜ë„ë¡ ì„í¬íŠ¸í•  ìˆ˜ ìˆëŠ” ëª‡ ê°€ì§€ ë¶€ê°€ì ì¸ íƒ€ì… ì •ì˜ë„ ìˆìŠµë‹ˆë‹¤.

```typescript
import useSWR, { Middleware, SWRHook } from 'swr'

const swrMiddleware: Middleware = (useSWRNext: SWRHook) => (key, fetcher, config) => {
  // ...
  return useSWRNext(key, fetcher, config)
}
```
