---
image: https://assets.vercel.com/image/upload/v1670542323/swr/v2.png
description: '–ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ–º SWR 2.0: –Ω–æ–≤—ã–µ API-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –º—É—Ç–∞—Ü–∏–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–≥–æ UI, –Ω–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞, —É–ª—É—á—à–µ–Ω–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ.'
date: 9 –¥–µ–∫–∞–±—Ä—è 2022 –≥.
---

import { Callout } from 'nextra-theme-docs'
import { Bleed } from 'nextra-theme-docs'

import Authors, { Author } from 'components/authors'
import Video from 'components/video'

# –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ–º SWR 2.0 [#announcing-swr-20]

<Authors date="9 –¥–µ–∫–∞–±—Ä—è 2022 –≥." by="–ø–æ–¥ –∞–≤—Ç–æ—Ä—Å—Ç–≤–æ–º">
  <Author name="Shu Ding" link="https://twitter.com/shuding_" />
  <Author name="Jiachi Liu" link="https://twitter.com/huozhi" />
  <Author name="Toru Kobayashi" link="https://twitter.com/koba04" />
  <Author name="Yixuan Xu" link="https://twitter.com/yixuanxu94" />
</Authors>

–ú—ã —Ä–∞–¥—ã –æ–±—ä—è–≤–∏—Ç—å –æ –≤—ã–ø—É—Å–∫–µ SWR 2.0, –ø–æ–ø—É–ª—è—Ä–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ React –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º –ø–æ–ª—É—á–∞—Ç—å, –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å –∏ –∏–∑–º–µ–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ –∞–∫—Ç—É–∞–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Å —É—á–µ—Ç–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —ç—Ç–∏—Ö –¥–∞–Ω–Ω—ã—Ö —Å —Ç–µ—á–µ–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏.

–≠—Ç–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å —É–ª—É—á—à–µ–Ω–∏—è–º–∏ –∏ –Ω–æ–≤—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏, —Ç–∞–∫–∏–º–∏ –∫–∞–∫ –Ω–æ–≤—ã–µ API-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –º—É—Ç–∞—Ü–∏–π, —É–ª—É—á—à–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–≥–æ UI, –Ω–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∏ —É–ª—É—á—à–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞. –ú—ã —Ö–æ—Ç–µ–ª–∏ –±—ã –≤—ã—Ä–∞–∑–∏—Ç—å –æ–≥—Ä–æ–º–Ω—É—é –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å –≤—Å–µ–º –∫–æ–Ω—Ç—Ä–∏–±—å—é—Ç–æ—Ä–∞–º –∏ –º–µ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º, –∫–æ—Ç–æ—Ä—ã–µ —Å–¥–µ–ª–∞–ª–∏ —ç—Ç–æ—Ç —Ä–µ–ª–∏–∑ –≤–æ–∑–º–æ–∂–Ω—ã–º.

## –ú—É—Ç–∞—Ü–∏–∏ –∏ –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–π UI [#mutation-and-optimistic-ui]

### useSWRMutation [#useswrmutation]

–ú—É—Ç–∞—Ü–∏—è —è–≤–ª—è–µ—Ç—Å—è –≤–∞–∂–Ω–æ–π —á–∞—Å—Ç—å—é –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤—ã–±–æ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö. –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –∫–∞–∫ –ª–æ–∫–∞–ª—å–Ω–æ, —Ç–∞–∫ –∏ —É–¥–∞–ª–µ–Ω–Ω–æ. –ù–∞—à —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π API `mutate` –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º –ø–æ–≤—Ç–æ—Ä–Ω–æ —Ä–µ–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∏ –∏–∑–º–µ–Ω—è—Ç—å —Ä–µ—Å—É—Ä—Å—ã –≤—Ä—É—á–Ω—É—é. –í SWR 2.0 –Ω–æ–≤—ã–π —Ö—É–∫ `useSWRMutation` –µ—â–µ –±–æ–ª—å—à–µ —É–ø—Ä–æ—â–∞–µ—Ç —É–¥–∞–ª–µ–Ω–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ API. –í—ã –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –º—É—Ç–∞—Ü–∏—é —Å –ø–æ–º–æ—â—å—é —Ö—É–∫–∞, –∞ –∑–∞—Ç–µ–º –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –µ–µ –ø–æ–∑–∂–µ:

```jsx {11,16}
import useSWRMutation from 'swr/mutation'

async function sendRequest(url, { arg }) {
  return fetch(url, {
    method: 'POST',
    body: JSON.stringify(arg)
  })
}

function App() {
  const { trigger, isMutating } = useSWRMutation('/api/user', sendRequest)

  return (
    <button
      disabled={isMutating}
      onClick={() => trigger({ username: 'johndoe' })}
    >{
      isMutating ? '–°–æ–∑–¥–∞—ë—Ç—Å—è...' : '–°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è'
    }</button>
  )
}
```

–í –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–º –≤—ã—à–µ –ø—Ä–∏–º–µ—Ä–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –º—É—Ç–∞—Ü–∏—è `sendRequest`, –∫–æ—Ç–æ—Ä–∞—è –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–µ—Å—É—Ä—Å `'/api/user'`. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç `useSWR`, `useSWRMutation` –Ω–µ –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –æ–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `trigger`-—Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä—É—é –ø–æ–∑–∂–µ –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –º—É—Ç–∞—Ü–∏–∏.

–§—É–Ω–∫—Ü–∏—è `sendRequest` –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º `{username: 'johndoe' }`. –ó–Ω–∞—á–µ–Ω–∏–µ `isMutating` –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –Ω–∞ `true`, –ø–æ–∫–∞ –º—É—Ç–∞—Ü–∏—è –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è.

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, —ç—Ç–æ—Ç –Ω–æ–≤—ã–π —Ö—É–∫ —Ä–µ—à–∞–µ—Ç –¥—Ä—É–≥–∏–µ –ø—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å —É –≤–∞—Å —Å –º—É—Ç–∞—Ü–∏—è–º–∏:

- –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤–æ –≤—Ä–µ–º—è –º—É—Ç–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫–∞—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–∏ —Å–±–æ–µ –º—É—Ç–∞—Ü–∏–∏
- –ò–∑–±–µ–∂–∞–Ω–∏–µ –ª—é–±—ã—Ö –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π –≥–æ–Ω–∫–∏ –º–µ–∂–¥—É `useSWR` –∏ –¥—Ä—É–≥–∏–º–∏ –º—É—Ç–∞—Ü–∏—è–º–∏ —Ç–æ–≥–æ –∂–µ —Ä–µ—Å—É—Ä—Å–∞
- –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–µ—à–∞ `useSWR` –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º—É—Ç–∞—Ü–∏–∏
- ...

–í—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ –ø–æ–¥—Ä–æ–±–Ω—ã–µ —Å–ø—Ä–∞–≤–æ—á–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ –ø—Ä–∏–º–µ—Ä—ã –ø–æ API, –ø—Ä–æ—á–∏—Ç–∞–≤ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é](/docs/mutation#useswrmutation) –∏–ª–∏ –ø—Ä–æ–ª–∏—Å—Ç–∞–≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ª–µ–¥—É—é—â–∏—Ö —Ä–∞–∑–¥–µ–ª–æ–≤.

### –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–π UI [#optimistic-ui]

–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–π UI ‚Äî –æ—Ç–ª–∏—á–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤–µ–±-—Å–∞–π—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –æ—â—É—â–∞—é—Ç—Å—è –±—ã—Å—Ç—Ä—ã–º–∏ –∏ –æ—Ç–∑—ã–≤—á–∏–≤—ã–º–∏; –æ–¥–Ω–∞–∫–æ —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç—Ä—É–¥–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ. –í SWR 2.0 –¥–æ–±–∞–≤–ª–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–æ–≤—ã—Ö –º–æ—â–Ω—ã—Ö –æ–ø—Ü–∏–π, –æ–±–ª–µ–≥—á–∞—é—â–∏—Ö —Ä–∞–±–æ—Ç—É.

–î–æ–ø—É—Å—Ç–∏–º, —É –Ω–∞—Å –µ—Å—Ç—å API, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É –≤ —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:

```jsx
await addNewTodo('–ù–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç')
```

–í –Ω–∞—à–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ö—É–∫ `useSWR` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –¥–µ–ª —Å –∫–Ω–æ–ø–∫–æ–π ¬´–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç¬ª, –∫–æ—Ç–æ—Ä–∞—è –∑–∞–ø—É—Å–∫–∞–µ—Ç —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å –∏ –ø—Ä–æ—Å–∏—Ç SWR –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –ø–æ–º–æ—â–∏ `mutate()`:

```jsx {7,8}
const { mutate, data } = useSWR('/api/todos')

return <>
  <ul>{/* –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö */}</ul>

  <button onClick={async () => {
    await addNewTodo('–ù–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç')
    mutate()
  }}>
    –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç
  </button>
</>
```

–û–¥–Ω–∞–∫–æ –∑–∞–ø—Ä–æ—Å `await addNewTodo(...)` –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω—ã–º. –ö–æ–≥–¥–∞ –æ–Ω —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –≤–∏–¥—è—Ç —Å—Ç–∞—Ä—ã–π —Å–ø–∏—Å–æ–∫, –¥–∞–∂–µ –µ—Å–ª–∏ –º—ã —É–∂–µ –∑–Ω–∞–µ–º, –∫–∞–∫ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –Ω–æ–≤—ã–π —Å–ø–∏—Å–æ–∫. –° –Ω–æ–≤–æ–π –æ–ø—Ü–∏–µ–π `optimisticData` –º—ã –º–æ–∂–µ–º –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –Ω–æ–≤—ã–π —Å–ø–∏—Å–æ–∫ –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ, –ø—Ä–µ–∂–¥–µ —á–µ–º —Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—Ç–∏—Ç:

```jsx {8}
const { mutate, data } = useSWR('/api/todos')

return <>
  <ul>{/* –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö */}</ul>

  <button onClick={() => {
    mutate(addNewTodo('–ù–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç'), {
      optimisticData: [...data, '–ù–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç'],
    })
  }}>
    –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç
  </button>
</>
```

SWR –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ–±–Ω–æ–≤–∏—Ç `data` –∑–Ω–∞—á–µ–Ω–∏–µ–º `optimisticData`, –∞ –∑–∞—Ç–µ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –∑–∞–ø—Ä–æ—Å –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è, SWR —Ä–µ–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ä–µ—Å—É—Ä—Å, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ–Ω —Å–∞–º—ã–π –ø–æ—Å–ª–µ–¥–Ω–∏–π.

–ö–∞–∫ –∏ –≤–æ –º–Ω–æ–≥–∏—Ö API, –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å `addNewTodo(...)` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ —Å —Å–µ—Ä–≤–µ—Ä–∞, –º—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ–º –Ω–∞–ø—Ä—è–º—É—é –ø–æ–∫–∞–∑–∞—Ç—å —ç—Ç–æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –Ω–∞—á–∏–Ω–∞—Ç—å –Ω–æ–≤—É—é —Ä–µ–≤–∞–ª–∏–¥–∞—Ü–∏—é)! –ü–æ—è–≤–∏–ª–∞—Å—å –Ω–æ–≤–∞—è –æ–ø—Ü–∏—è `populateCache`, —Å–æ–æ–±—â–∞—é—â–∞—è SWR –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ç–µ–º–∏, —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º—É—Ç–∞—Ü–∏—è:

```jsx {9}
const { mutate, data } = useSWR('/api/todos')

return <>
  <ul>{/* –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö */}</ul>

  <button onClick={() => {
    mutate(addNewTodo('–ù–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç'), {
      optimisticData: [...data, '–ù–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç'],
      populateCache: true,
    })
  }}>
    –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç
  </button>
</>
```

–í —Ç–æ –∂–µ –≤—Ä–µ–º—è –Ω–∞–º –Ω–µ –Ω—É–∂–Ω–∞ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –µ—â—ë –æ–¥–Ω–∞ —Ä–µ–≤–∞–ª–∏–¥–∞—Ü–∏—è, —Ç–∞–∫ –∫–∞–∫ –¥–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç–∞ –∏—Å—Ö–æ–¥—è—Ç –∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –ø—Ä–∞–≤–¥—ã, –º—ã –º–æ–∂–µ–º –æ—Ç–∫–ª—é—á–∏—Ç—å –µ–µ —Å –ø–æ–º–æ—â—å—é –æ–ø—Ü–∏–∏ `revalidate`:

```jsx {10}
const { mutate, data } = useSWR('/api/todos')

return <>
  <ul>{/* –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö */}</ul>

  <button onClick={() => {
    mutate(addNewTodo('–ù–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç'), {
      optimisticData: [...data, '–ù–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç'],
      populateCache: true,
      revalidate: false,
    })
  }}>
    –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç
  </button>
</>
```

–ù–∞–∫–æ–Ω–µ—Ü, –µ—Å–ª–∏ `addNewTodo(...)` –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –æ—à–∏–±–∫–æ–π —Å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º, –º—ã –º–æ–∂–µ–º –æ—Ç–∫–∞—Ç–∏—Ç—å –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (`[...data, '–ù–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç']`), –∫–æ—Ç–æ—Ä—ã–µ –º—ã —Ç–æ–ª—å–∫–æ —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏, —É—Å—Ç–∞–Ω–æ–≤–∏–≤ –¥–ª—è `rollbackOnError` –∑–Ω–∞—á–µ–Ω–∏–µ `true` (—á—Ç–æ —Ç–∞–∫–∂–µ —è–≤–ª—è–µ—Ç—Å—è –æ–ø—Ü–∏–µ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é). –ö–æ–≥–¥–∞ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, SWR –≤–µ—Ä–Ω–µ—Ç `data` –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É –∑–Ω–∞—á–µ–Ω–∏—é.

```jsx {11}
const { mutate, data } = useSWR('/api/todos')

return <>
  <ul>{/* –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö */}</ul>

  <button onClick={() => {
    mutate(addNewTodo('–ù–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç'), {
      optimisticData: [...data, '–ù–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç'],
      populateCache: true,
      revalidate: false,
      rollbackOnError: true,
    })
  }}>
    –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç
  </button>
</>
```

–í—Å–µ —ç—Ç–∏ API —Ç–∞–∫–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –≤ –Ω–æ–≤–æ–º —Ö—É–∫–µ `useSWRMutation`. –ß—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –æ –Ω–∏—Ö –±–æ–ª—å—à–µ, –≤—ã –º–æ–∂–µ—Ç–µ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –Ω–∞—à–µ–π [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π](/docs/mutation#optimistic-updates). –ò –≤–æ—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∞—è —Ç–∞–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:

<Video
  src="/video/optimistic-ui.mp4"
  caption="–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–π UI —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ—Ç–∫–∞—Ç–æ–º –ø—Ä–∏ –æ—à–∏–±–∫–µ"
  ratio={223/584}
/>

### –ú—É—Ç–∞—Ü–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–ª—é—á–µ–π [#mutate-multiple-keys]

–ì–ª–æ–±–∞–ª—å–Ω—ã–π API-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `mutate` —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä–æ–π –≤—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω—è—Ç—å –∏–ª–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –∫–ª—é—á–∏. –≠—Ç–æ –±—É–¥–µ—Ç –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, –∫–∞–∫ –∞–Ω–Ω—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –ß—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ, –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –ø—Ä–æ [–ú—É—Ç–∞—Ü–∏—é –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–ª—é—á–µ–π](/docs/mutation#–º—É—Ç–∞—Ü–∏—è-–Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö-—ç–ª–µ–º–µ–Ω—Ç–æ–≤) –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

```jsx
import { mutate } from 'swr'
// –ò–ª–∏ –∏–∑ —Ö—É–∫–∞, –µ—Å–ª–∏ –≤—ã –Ω–∞—Å—Ç—Ä–æ–∏–ª–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –∫–µ—à–∞:
// { mutate } = useSWRConfig()

// –ú—É—Ç–∞—Ü–∏—è –æ–¥–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞
mutate(key)

// –ú—É—Ç–∞—Ü–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –æ—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞ (—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ undefined)
mutate(
  key => typeof key === 'string' && key.startsWith('/api/item?id='),
  undefined,
  { revalidate: false }
)
```

## SWR DevTools [#swr-devtools]

[SWRDevTools](https://swr-devtools.vercel.app) ‚Äî —ç—Ç–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞, –ø–æ–º–æ–≥–∞—é—â–µ–µ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å –∫–µ—à SWR –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–±–æ—Ä–∫–∏. –ü–æ—Å–µ—Ç–∏—Ç–µ –Ω–∞—à —Ä–∞–∑–¥–µ–ª [devtools](/docs/advanced/devtools), —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –≤ —Å–≤–æ–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

![](/img/devtools/cache-view.jpg)

## –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö [#preloading-data]

–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∏—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º. –ï—Å–ª–∏ –≤—ã –∑–Ω–∞–µ—Ç–µ, —á—Ç–æ —Ä–µ—Å—É—Ä—Å –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –ø–æ–∑–∂–µ, –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π API `preload`, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –∏–∑–≤–ª–µ–∫–∞—Ç—å –µ–≥–æ —Ä–∞–Ω—å—à–µ:

```jsx {6}
import useSWR, { preload } from 'swr'

const fetcher = (url) => fetch(url).then((res) => res.json())

// –í—ã –º–æ–∂–µ—Ç–µ –≤—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∏ –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ
preload('/api/user', fetcher)

function Profile() {
  // –ö–æ–º–ø–æ–Ω–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ:
  const { data, error } = useSWR('/api/user', fetcher)
  // ...
}

export function Page () {
  return <Profile/>
}
```

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ API –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –º—ã –Ω–∞—á–∏–Ω–∞–µ–º –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ä–µ—Å—É—Ä—Å –µ—â—ë –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ React –Ω–∞—á–Ω–µ—Ç —á—Ç–æ-–ª–∏–±–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å.
–ò –∫–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Profile` —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è, –¥–∞–Ω–Ω—ã–µ, –≤–µ—Ä–æ—è—Ç–Ω–æ, —É–∂–µ –º–æ–≥—É—Ç –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã. –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –≤—Å—ë –µ—â—ë –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, —Ö—É–∫ `useSWR` –±—É–¥–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–π –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É –≤–º–µ—Å—Ç–æ –∑–∞–ø—É—Å–∫–∞ –Ω–æ–≤–æ–≥–æ.

API `preload` —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö, –∫–∞–∫ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –¥—Ä—É–≥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∫–æ—Ç–æ—Ä–∞—è, –≤–µ—Ä–æ—è—Ç–Ω–æ, –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –≤—ã–±–æ—Ä–∫–µ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é SWR –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ [–∑–¥–µ—Å—å](/docs/prefetching).

## `isLoading` [#isloading]

`isLoading` ‚Äî —ç—Ç–æ –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ `useSWR`, –∫–æ—Ç–æ—Ä–æ–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç, **–µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –≤—Å—ë –µ—â—ë –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏ –¥–∞–Ω–Ω—ã–µ –µ—â—ë –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã**. –†–∞–Ω—å—à–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `isValidating` –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–ª–æ —Å–æ–±–æ–π –∫–∞–∫ –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏, —Ç–∞–∫ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏, –ø–æ—ç—Ç–æ–º—É –Ω–∞–º –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å –ø—Ä–æ–≤–µ—Ä—è—Ç—å, —è–≤–ª—è—é—Ç—Å—è –ª–∏ `data` –∏ `error` `undefined`, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –±—ã–ª–æ –ª–∏ —ç—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞—á–∞–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏.

–¢–µ–ø–µ—Ä—å —ç—Ç–æ –Ω–∞—Å—Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å—Ç–æ, —á—Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–ø—Ä—è–º—É—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ `isLoading` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ –∑–∞–≥—Ä—É–∑–∫–µ:

```jsx
import useSWR from 'swr'

function Profile() {
  const { data, isLoading } = useSWR('/api/user', fetcher)

  if (isLoading) return <div>–∑–∞–≥—Ä—É–∑–∫–∞...</div>
  return <div>–ø—Ä–∏–≤–µ—Ç {data.name}!</div>
}
```

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ `isValidating` –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –ø–æ—ç—Ç–æ–º—É –≤—ã –≤—Å–µ —Ä–∞–≤–Ω–æ –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è —Ä–µ–≤–∞–ª–∏–¥–∞—Ü–∏–π.

<Callout emoji="üìù">
  –ú—ã –¥–æ–±–∞–≤–∏–ª–∏ –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É [–ü–æ–Ω–∏–º–∞–Ω–∏–µ SWR](/docs/advanced/understanding), —á—Ç–æ–±—ã –æ–ø–∏—Å–∞—Ç—å, –∫–∞–∫ SWR –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è, –≤–∫–ª—é—á–∞—è —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É `isValidating` –∏ `isLoading`, –∏ –∫–∞–∫ –∏—Ö –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.
</Callout>

## –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è [#preserving-previous-state]

–û–ø—Ü–∏—è `keepPreviousData` ‚Äî —ç—Ç–æ –Ω–æ–≤–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ, –ø–æ–∑–≤–æ–ª—è—é—â–µ–µ –≤–∞–º —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –ø–æ–ª—É—á–µ–Ω—ã —Ä–∞–Ω–µ–µ. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞–µ—Ç UX, –∫–æ–≥–¥–∞ –≤—ã –∏–∑–≤–ª–µ–∫–∞–µ—Ç–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–∏—Ö –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å —Ñ—É–Ω–∫—Ü–∏–µ–π –ø–æ–∏—Å–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏, –≥–¥–µ `key` —Ä–µ—Å—É—Ä—Å–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –º–µ–Ω—è–µ—Ç—Å—è:

```jsx {5}
function Search() {
  const [search, setSearch] = React.useState('');

  const { data, isLoading } = useSWR(`/search?q=${search}`, fetcher, {
    keepPreviousData: true
  })

  return (
    <div>
      <input
        type="text"
        value={search}
        onChange={(e) => setSearch(e.target.value)}
        placeholder="–ü–æ–∏—Å–∫..."
      />

      <div className={isLoading ? "–∑–∞–≥—Ä—É–∑–∫–∞" : ""}>
        {data?.products.map(item => <Product key={item.id} name={item.name} />)
      </div>
    </div>
  );
}
```

<Video
  src="https://user-images.githubusercontent.com/3676859/163695903-a3eb1259-180e-41e0-821e-21c320201194.mp4"
  caption="–°–æ—Ö—Ä–∞–Ω—è—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞, –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä keepPreviousData"
  ratio={640/730}
/>

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–¥ –≤ [CodeSandbox](https://codesandbox.io/s/swr-keeppreviousdata-fsjz3m), –∏ –≤—ã –º–æ–∂–µ—Ç–µ —É–∑–Ω–∞—Ç—å –æ –Ω–µ–º –±–æ–ª—å—à–µ [–∑–¥–µ—Å—å](/docs/advanced/understanding#–≤–æ–∑–≤—Ä–∞—Ç-–ø—Ä–µ–¥—ã–¥—É—â–∏—Ö-–¥–∞–Ω–Ω—ã—Ö-–¥–ª—è-–ª—É—á—à–µ–≥–æ-ux).

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π [#extending-configurations]

`SWRConfig` —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–Ω–∞—á–µ–Ω–∏—è. –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —É—Ä–æ–≤–Ω–µ–π `<SWRConfig>`, –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–æ–ª—É—á–∞–µ—Ç —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—É—é. –≠—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–µ–ª–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É SWR –±–æ–ª–µ–µ –≥–∏–±–∫–æ–π –≤ –±–æ–ª—å—à–æ–π –∫–æ–¥–æ–≤–æ–π –±–∞–∑–µ. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ [–∑–¥–µ—Å—å](/docs/global-configuration).

```jsx
<SWRConfig
  value={parentConfig => ({
    dedupingInterval: parentConfig.dedupingInterval * 5,
    refreshInterval: 100,
  })}
>
  <Page />
</SWRConfig>
```

## –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ React 18 [#improved-react-18-support]

SWR –æ–±–Ω–æ–≤–∏–ª —Å–≤–æ–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫–æ–¥, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å API `useSyncExternalStore` –∏ `startTransition` –≤ React 18. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–æ–ª–µ–µ –≤—ã—Å–æ–∫—É—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞. –≠—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∫–∞–∫–∏—Ö-–ª–∏–±–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–æ–¥–∞, –∏ –≤—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ–ª—É—á–∞—Ç –æ—Ç –Ω–µ–≥–æ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω—É—é –≤—ã–≥–æ–¥—É. –ü—Ä–æ–∫–ª–∞–¥–∫–∏ –≤–∫–ª—é—á–µ–Ω—ã –¥–ª—è React 17 –∏ –Ω–∏–∂–µ.

SWR 2.0 –∏ –≤—Å–µ –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É —Å–æ–≤–º–µ—Å—Ç–∏–º—ã —Å React 16 –∏ 17.

## –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ [#migration-guide]

### Fetcher –±–æ–ª—å—à–µ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ [#fetcher-no-longer-accepts-multiple-arguments]

`key` —Ç–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∫–∞–∫ –æ–¥–∏–Ω –∞—Ä–≥—É–º–µ–Ω—Ç.

```diff
- useSWR([1, 2, 3], (a, b, c) => {
+ useSWR([1, 2, 3], ([a, b, c]) => {
  assert(a === 1)
  assert(b === 2)
  assert(c === 3)
})
```

### –ì–ª–æ–±–∞–ª—å–Ω–∞—è –º—É—Ç–∞—Ü–∏—è –±–æ–ª—å—à–µ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `getKey` [#global-mutate-no-longer-accepts-a-getkey-function]

–¢–µ–ø–µ—Ä—å, –µ—Å–ª–∏ –≤—ã –ø–µ—Ä–µ–¥–∞–¥–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –≥–ª–æ–±–∞–ª—å–Ω–æ–º—É `mutate`, –æ–Ω–∞ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ [—Ñ–∏–ª—å—Ç—Ä](/blog/swr-v2#–º—É—Ç–∞—Ü–∏—è-–Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö-–∫–ª—é—á–µ–π). –†–∞–Ω—å—à–µ –º–æ–∂–Ω–æ –±—ã–ª–æ –ø–µ—Ä–µ–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –≤–æ–∑–≤—Ä–∞—â–∞—é—â—É—é –∫–ª—é—á, –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é `mutate`:

```diff
- mutate(() => '/api/item') // a function to return a key
+ mutate('/api/item')       // to mutate the key, directly pass it
```

### –ù–æ–≤–æ–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ `keys()` –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∫–µ—à–∞ [#new-required-property-keys-for-cache-interface]

–ö–æ–≥–¥–∞ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Å–≤–æ—é —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∫–µ—à–∞, –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ Cache —Ç–µ–ø–µ—Ä—å —Ç—Ä–µ–±—É–µ—Ç—Å—è –º–µ—Ç–æ–¥ `keys()`, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ –∫–ª—é—á–∏ –≤ –æ–±—ä–µ–∫—Ç–µ –∫–µ—à–∞, –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º Map –≤ JavaScript.

```diff
interface Cache<Data> {
  get(key: string): Data | undefined
  set(key: string, value: Data): void
  delete(key: string): void
+ keys(): IterableIterator<string>
}
```

### –ò–∑–º–µ–Ω–µ–Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫—ç—à–∞ [#changed-cache-internal-structure]

–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∫—ç—à–∞ –±—É–¥–µ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å —Å–æ–±–æ–π –æ–±—ä–µ–∫—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –≤—Å–µ —Ç–µ–∫—É—â–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

```diff
- assert(cache.get(key) === data)
+ assert(cache.get(key) === { data, error, isValidating })

// getter
- cache.get(key)
+ cache.get(key)?.data

// setter
- cache.set(key, data)
+ cache.set(key, { ...cache.get(key), data })
```

<Callout emoji="üö®" type="error">
  –í—ã –Ω–µ –¥–æ–ª–∂–Ω—ã –ø–∏—Å–∞—Ç—å –≤ –∫–µ—à –Ω–∞–ø—Ä—è–º—É—é, —ç—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é.
</Callout>

### `SWRConfig.default` –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ `SWRConfig.defaultValue` [#swrconfigdefault-is-renamed-as-swrconfigdefaultvalue]

`SWRConfig.defaultValue` ‚Äî —ç—Ç–æ —Å–≤–æ–π—Å—Ç–≤–æ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ SWR –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

```diff
- SWRConfig.default
+ SWRConfig.defaultValue
```

### –¢–∏–ø `InfiniteFetcher` –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ `SWRInfiniteFetcher` [#type-infinitefetcher-is-renamed-as-swrinfinitefetcher]

```diff
- import type { InfiniteFetcher } from 'swr/infinite'
+ import type { SWRInfiniteFetcher } from 'swr/infinite'
```

### –ò–∑–±–µ–≥–∞–π—Ç–µ –ó–∞–¥–µ—Ä–∂–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ [#avoid-suspense-on-server]

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `suspense: true` —Å SWR –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞, –≤–∫–ª—é—á–∞—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –≤ Next.js, —Ç–æ –≤—ã –¥–æ–ª–∂–Ω—ã —É–∫–∞–∑–∞—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ [`fallbackData` –∏–ª–∏ `fallback`](/docs/with-nextjs#–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π-—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥-—Å-–∏—Å—Ö–æ–¥–Ω—ã–º–∏-–¥–∞–Ω–Ω—ã–º–∏). –°–µ–≥–æ–¥–Ω—è —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—ã –Ω–µ –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Suspense –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. –î–≤–∞ –¥—Ä—É–≥–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–∞: –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–≤–ª–µ–∫–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ –∏–ª–∏ –∑–∞—Å—Ç–∞–≤–∏—Ç—å —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –∏–∑–≤–ª–µ–∫–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–∞ –≤–∞—Å (–∫–∞–∫ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç getStaticProps –≤ Next.js).

### ES2018 –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ü–µ–ª–∏ —Å–±–æ—Ä–∫–∏ (Build Target) [#es2018-as-the-build-target]

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å IE 11, –≤—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∞—Ä–≥–µ—Ç ES5 –≤ —Å–≤–æ—ë–º —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–µ –∏–ª–∏ —Å–±–æ—Ä—â–∏–∫–µ. –≠—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–∑–≤–æ–ª–∏–ª–æ –ø–æ–≤—ã—Å–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å SSR –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–µ–±–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞.

## –ñ—É—Ä–Ω–∞–ª –∏–∑–º–µ–Ω–µ–Ω–∏–π [#changelog]

–ü—Ä–æ—á—Ç–∏—Ç–µ –ø–æ–ª–Ω—ã–π –∂—É—Ä–Ω–∞–ª –∏–∑–º–µ–Ω–µ–Ω–∏–π [–Ω–∞ GitHub](https://github.com/vercel/swr/releases).

## –ë—É–¥—É—â–µ–µ –∏ —Å–ø–∞—Å–∏–±–æ! [#the-future--thank-you]

–° –Ω–æ–≤—ã–º –≤—ã–ø—É—Å–∫–æ–º [Next.js 13](https://nextjs.org/blog/next-13) –º—ã –≤–∏–¥–∏–º –º–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –Ω–æ–≤—ã—Ö –≤–µ—â–µ–π, –∞ —Ç–∞–∫–∂–µ —Å–¥–≤–∏–≥–∏ –ø–∞—Ä–∞–¥–∏–≥–º—ã –≤ —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ React: [–°–µ—Ä–≤–µ—Ä–Ω—ã–µ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã React](https://beta.nextjs.org/docs/rendering/server-and-client-components), –ø–æ—Ç–æ–∫–æ–≤–∞—è SSR, [–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã](https://beta.nextjs.org/docs/data-fetching/fetching#asyncawait-in-server-components) –∏ [—Ö—É–∫ `use`](https://github.com/acdlite/rfcs/blob/first-class-promises/text/0000-first-class-support-for-promises.md#usepromise). –ú–Ω–æ–≥–∏–µ –∏–∑ –Ω–∏—Ö —Å–≤—è–∑–∞–Ω—ã —Å –≤—ã–±–æ—Ä–∫–æ–π –¥–∞–Ω–Ω—ã—Ö, –∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑ –Ω–∏—Ö –∏–º–µ—é—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–µ—Ä–µ—Å–µ–∫–∞—é—â–∏–µ—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å SWR.

–û–¥–Ω–∞–∫–æ —Ü–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ SWR –æ—Å—Ç–∞–µ—Ç—Å—è –ø—Ä–µ–∂–Ω–µ–π. –ú—ã —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã —ç—Ç–æ –±—ã–ª–∞ –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –ª–µ–≥–∫–∞—è, –Ω–µ–∑–∞–≤–∏—Å–∏–º–∞—è –æ—Ç —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ –∏ –Ω–µ–º–Ω–æ–≥–æ _—É–≤–µ—Ä–µ–Ω–Ω–∞—è_ (—Ç.–µ. —Ä–µ–≤–∞–ª–∏–¥–∏—Ä—É—é—â–∞—è –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ). –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –ø—ã—Ç–∞—Ç—å—Å—è –±—ã—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º, –º—ã —Ö–æ—Ç–∏–º —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ –∏–Ω–Ω–æ–≤–∞—Ü–∏—è—Ö, –∫–æ—Ç–æ—Ä—ã–µ —É–ª—É—á—à–∞—é—Ç UX. –¢–µ–º –≤—Ä–µ–º–µ–Ω–µ–º –º—ã —Ç–∞–∫–∂–µ –ø—Ä–æ–≤–æ–¥–∏–º –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –æ —Ç–æ–º, –∫–∞–∫ —É–ª—É—á—à–∏—Ç—å SWR —Å –ø–æ–º–æ—â—å—é —ç—Ç–∏—Ö –Ω–æ–≤—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π React.

–ú—ã —Ö–æ—Ç–∏–º –ø–æ–±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç—å –∫–∞–∂–¥–æ–≥–æ –∏–∑ [143](https://github.com/vercel/swr/graphs/contributors) –∫–æ–Ω—Ç—Ä–∏–±—é—Ç–µ—Ä–æ–≤ (+ [106](https://github.com/vercel/swr-site/graphs/contributors) –∫–æ–Ω—Ç—Ä–∏–±—é—Ç–µ—Ä–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏), –∞ —Ç–∞–∫–∂–µ —Ç–µ—Ö, –∫—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –Ω–∞–º –∏–ª–∏ –æ—Å—Ç–∞–≤–∏–ª–∏ –æ—Ç–∑—ã–≤—ã. –û—Å–æ–±–∞—è –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å [Toru Kobayashi](https://twitter.com/koba04) –∑–∞ –≤—Å—é –µ–≥–æ —Ä–∞–±–æ—Ç—É –Ω–∞–¥ DevTools –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π ‚Äî –±–µ–∑ —Ç–µ–±—è –º—ã –±—ã –Ω–µ —Å–ø—Ä–∞–≤–∏–ª–∏—Å—å!
